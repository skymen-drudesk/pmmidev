services:
  authentication.pmmi_personify_sso:
    class: Drupal\pmmi_personify_sso\Authentication\Provider\PMMIPersonifySSOAuthProvider
    arguments: ['@config.factory', '@entity_type.manager']
    tags:
      - { name: authentication_provider, provider_id: pmmi_personify_sso_auth_provider, global: TRUE, priority: 35 }

  pmmi_personify_sso.helper:
    class: Drupal\pmmi_personify_sso\Service\PMMIPersonifySSOHelper
    arguments: ['@config.factory', '@url_generator.non_bubbling', '@database', '@logger.factory', '@session']

  pmmi_personify_sso.service:
    class: Drupal\pmmi_personify_sso\Service\PMMIPersonifySSOService
    arguments: ['@http_client', '@config.factory', '@logger.factory']

  pmmi_personify_sso.manager:
    class: Drupal\pmmi_personify_sso\Service\PMMIPersonifySSOManager
    arguments: ['@externalauth.externalauth', '@config.factory', '@entity_type.manager', '@logger.channel.externalauth', '@pmmi_personify_sso.service']

  pmmi_personify_sso.page_cache_response_policy.deny_sso:
    class: Drupal\pmmi_personify_sso\PageCache\DenySSO
    arguments: ['@config.factory', '@plugin.manager.condition']
    public: false
    tags:
      - { name: page_cache_response_policy }