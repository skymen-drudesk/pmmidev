services:
  authentication.pmmi_sso:
    class: Drupal\pmmi_sso\Authentication\Provider\PMMISSOAuthProvider
    arguments: ['@config.factory', '@entity_type.manager']
    tags:
      - { name: authentication_provider, provider_id: pmmi_sso_auth_provider, global: TRUE, priority: 35 }

  pmmi_sso.helper:
    class: Drupal\pmmi_sso\Service\PMMISSOHelper
    arguments: ['@config.factory', '@url_generator.non_bubbling', '@database', '@logger.factory', '@session']

  pmmi_sso.service:
    class: Drupal\pmmi_sso\Service\PMMISSOService
    arguments: ['@http_client', '@config.factory', '@logger.factory']

  pmmi_sso.manager:
    class: Drupal\pmmi_sso\Service\PMMISSOManager
    arguments: ['@externalauth.externalauth', '@config.factory', '@entity_type.manager', '@logger.channel.externalauth', '@pmmi_sso.service']

  pmmi_sso.page_cache_response_policy.deny_sso:
    class: Drupal\pmmi_sso\PageCache\DenySSO
    arguments: ['@config.factory', '@plugin.manager.condition']
    public: false
    tags:
      - { name: page_cache_response_policy }